"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4268],{3905:function(e,n,t){t.r(n),t.d(n,{MDXContext:function(){return m},MDXProvider:function(){return s},mdx:function(){return h},useMDXComponents:function(){return g},withMDXComponents:function(){return p}});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(){return l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},l.apply(this,arguments)}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var m=r.createContext({}),p=function(e){return function(n){var t=g(n.components);return r.createElement(e,l({},n,{components:t}))}},g=function(e){var n=r.useContext(m),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},s=function(e){var n=g(e.components);return r.createElement(m.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,o=e.parentName,m=d(e,["components","mdxType","originalType","parentName"]),p=g(t),s=a,c=p["".concat(o,".").concat(s)]||p[s]||u[s]||l;return t?r.createElement(c,i(i({ref:n},m),{},{components:t})):r.createElement(c,i({ref:n},m))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,o=new Array(l);o[0]=c;var i={};for(var d in n)hasOwnProperty.call(n,d)&&(i[d]=n[d]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var m=2;m<l;m++)o[m]=t[m];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},48505:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return d},metadata:function(){return m},toc:function(){return p},default:function(){return s}});var r=t(87462),a=t(63366),l=(t(67294),t(3905)),o=["components"],i={id:"logging",title:"Logging",sidebar_label:"Logging",slug:"/logging"},d=void 0,m={unversionedId:"framework_topics/development/logging",id:"framework_topics/development/logging",title:"Logging",description:"Logging in Bean Machine is provided through the logging module in Python. It is recommended that users get familiar with the basics (logger, handler, levels, etc.) of this module before reading further.",source:"@site/../docs/framework_topics/development/logging.md",sourceDirName:"framework_topics/development",slug:"/logging",permalink:"/docs/logging",editUrl:"https://github.com/facebookresearch/beanmachine/edit/main/website/../docs/framework_topics/development/logging.md",tags:[],version:"current",frontMatter:{id:"logging",title:"Logging",sidebar_label:"Logging",slug:"/logging"},sidebar:"someSidebar",previous:{title:"Model Comparison",permalink:"/docs/model_comparison"},next:{title:"Bean Machine Graph Inference",permalink:"/docs/beanstalk"}},p=[{value:"The Bean Machine Logger",id:"the-bean-machine-logger",children:[],level:2},{value:"Log Levels and Sub-Loggers",id:"log-levels-and-sub-loggers",children:[],level:2},{value:"For Developers",id:"for-developers",children:[],level:2}],g={toc:p};function s(e){var n=e.components,t=(0,a.Z)(e,o);return(0,l.mdx)("wrapper",(0,r.Z)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,l.mdx)("p",null,"Logging in Bean Machine is provided through the ",(0,l.mdx)("a",{parentName:"p",href:"https://docs.python.org/3/howto/logging.html"},"logging")," module in Python. It is recommended that users get familiar with the basics (logger, handler, levels, etc.) of this module before reading further."),(0,l.mdx)("h2",{id:"the-bean-machine-logger"},"The Bean Machine Logger"),(0,l.mdx)("p",null,"Upon importing the beanmachine module, the base logger ",(0,l.mdx)("inlineCode",{parentName:"p"},'"beanmachine"')," is initialized with two handlers such that it saves every message at or above the ",(0,l.mdx)("inlineCode",{parentName:"p"},"WARNING")," level to a local file and prints every message at or above the ",(0,l.mdx)("inlineCode",{parentName:"p"},"INFO")," level to the console. Users could control the information to be logged by replacing the default handlers with customized ones."),(0,l.mdx)("h2",{id:"log-levels-and-sub-loggers"},"Log Levels and Sub-Loggers"),(0,l.mdx)("p",null,"To keep sufficient flexibility and ease of use, Bean Machine provides multiple sub-loggers under the base logger ",(0,l.mdx)("inlineCode",{parentName:"p"},'"beanmachine"'),", such as ",(0,l.mdx)("inlineCode",{parentName:"p"},'"beanmachine.inference"'),", ",(0,l.mdx)("inlineCode",{parentName:"p"},'"beanmachine.proposer"'),", ",(0,l.mdx)("inlineCode",{parentName:"p"},'"beanmachine.world"'),", etc. The name of the sub-logger indicates where the message is generated. Following the convention of Python ",(0,l.mdx)("a",{parentName:"p",href:"https://docs.python.org/3/howto/logging.html"},"logging"),", users could modify the logging levels of the base or sub-loggers as they need. Experienced users could also create customized filters based on the message itself."),(0,l.mdx)("p",null,"In Bean Machine, we also offer a ",(0,l.mdx)("inlineCode",{parentName:"p"},"LogLevel")," class that maps the level name to its numeric value. The mapping is consistent with the ",(0,l.mdx)("inlineCode",{parentName:"p"},"logging")," module with additional levels inserted between ",(0,l.mdx)("inlineCode",{parentName:"p"},"INFO")," and ",(0,l.mdx)("inlineCode",{parentName:"p"},"DEBUG")," to differentiate different priorities in debugging. The following table provides the level description in details."),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Level Name"),(0,l.mdx)("th",{parentName:"tr",align:null},"Numric Value"),(0,l.mdx)("th",{parentName:"tr",align:null},"Type of Information to Log"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"ERROR"),(0,l.mdx)("td",{parentName:"tr",align:null},"40"),(0,l.mdx)("td",{parentName:"tr",align:null},"Exceptions that are caught and handled with alternative solutions.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"WARNING"),(0,l.mdx)("td",{parentName:"tr",align:null},"30"),(0,l.mdx)("td",{parentName:"tr",align:null},"Gradient calculation returns NaN or Inf.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"Falling back to other proposer.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"INFO"),(0,l.mdx)("td",{parentName:"tr",align:null},"20"),(0,l.mdx)("td",{parentName:"tr",align:null},"User-provided messages.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"DEBUG_UPDATES"),(0,l.mdx)("td",{parentName:"tr",align:null},"16"),(0,l.mdx)("td",{parentName:"tr",align:null},"Node name and value")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"Proposed value")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"Proposal log update")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"Children log update")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"Node log update")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"Accept/Reject")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"Proposer type")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"Proposer properties")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"Step size")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"The dependency graph of random variables")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"DEBUG"),(0,l.mdx)("td",{parentName:"tr",align:null},"10"),(0,l.mdx)("td",{parentName:"tr",align:null},"All logging messages")))),(0,l.mdx)("p",null,"The level ",(0,l.mdx)("inlineCode",{parentName:"p"},"INFO")," is reserved for users who would like to ",(0,l.mdx)("strong",{parentName:"p"},"print")," any information from their model."),(0,l.mdx)("h2",{id:"for-developers"},"For Developers"),(0,l.mdx)("p",null,"Developers are welcome to add additional loggings following the above pattern. e.g. When a new proposer is added, its associated information should use the ",(0,l.mdx)("inlineCode",{parentName:"p"},'"beanmachine.proposer"')," logger. If a new logging level must be added, please set the level (",(0,l.mdx)("inlineCode",{parentName:"p"},"LogLevel")," class) based on the type of information and the expected frequency of use (higher frequency -> higher level), and update the above table."))}s.isMDXComponent=!0}}]);